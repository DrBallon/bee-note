{"version":3,"sources":["styles/Layouts.tsx","components/NavigatorButton.tsx","store/constants/note.ts","store/actions/notes.ts","lib/utils.ts","store/selectors/note.ts","components/NavigatorItem.tsx","NavTop.tsx","Nav.tsx","PreviewPane.tsx","components/Editor.tsx","Item.tsx","EditorPane.tsx","Main.tsx","App.tsx","store/reducers/note.ts","store/constants/theme.ts","store/reducers/theme.ts","store/reducers/index.ts","index.tsx"],"names":["styled","div","FullFixed","Inner","DividerStyle","theme","borderColor","Divider","props","Label","LabelInner","scrollBar","Layout","height","navigatorButtonWidth","width","themeColorDark","PlaceHolder","NavigatorButton","connect","clickEvent","path","placeHolder","size","onClick","Icon","ADD_NOTE","GET_NOTES","TOGGLE_NOTE","SWITCH_CURRENT_NOTE","CHANGE_FILTER","EDIT_NOTE","DEL_NOTE","delNote","payload","type","Types","title","switchCurNote","changeFilter","filter","node2Markdown","node","level","text","pre","repeat","content","sub","forEach","subNode","curNoteTitle","state","noteData","root","findNoteByTitle","ret","filteredNodes","includes","push","length","getFoldTitles","createSelector","foldTitles","titles","getEditPaneList","root2","filter2","ret2","getMarkdown","navigatorItemHeight","paddingLeft","themeColorLight","SubItem","NavigatorItem","dispatch","addNote","parent","toggle","switchNote","data","folded","foldable","Fragment","mdiFolder","mdiDelete","cb","confirm","mdiPlus","map","NavTopLayout","getContent","NavTop","id","value","fileName","anchor","document","createElement","style","display","body","appendChild","href","window","URL","createObjectURL","Blob","setAttribute","click","revokeObjectURL","removeChild","downloadString","console","log","NavLayout","navWidth","navFontSize","Nav","storage","emptyStorage","gfm","require","markdownStyle","code","backgroundColor","renderers","lan","language","dracula","children","customStyle","PreviewPaneContainer","plugins","option","lineWrapping","Editor","change","options","onChange","isRoot","Content","SideToolBar","TitleInput","input","Item","editNote","oldTitle","newTitle","newContent","isRootNode","edit","useState","editMode","setEditMode","itemContent","setItemContent","itemTitle","setItemTitle","useEffect","e","target","mdiAccountEdit","EditorPaneLayout","EditorPaneTop","EditorPaneContent","SearchInput","EditorPane","list","filterChange","list2","_","isArray","placeholder","MainLayout","MainContent","layoutConfig","data2Markdown","Main","markdown","curData","setCurData","PreviewPane","GlobalStyle","createGlobalStyle","App","initData","foldTitle","switchCurrentNote","copy","JSON","parse","stringify","Math","random","toString","filterNote","tempNode","lsSave","localStorage","setItem","lsRead","getItem","action","types","GET_THEME","baseTheme","editorPaneWidth","sidebarWidth","StorageNavigatorTopHeight","reducers","combineReducers","config","store","createStore","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.d0e51bf3.chunk.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\n// import { BaseTheme } from './theme';\nexport const FullAbs = styled.div`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n`;\n\nexport const FullFixed = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: green;\n  display: flex;\n  z-index: 100;\n`;\n\nexport const Inner = styled.div`\n  min-width: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`;\ninterface PlaceHolderProps {\n  width: number;\n  height: number;\n}\nexport function PlaceHolder(props: PlaceHolderProps) {\n  const { width, height } = props;\n  const Ret = styled.div<PlaceHolderProps>`\n    width: ${(props) => props.width + 'px'};\n    height: ${(props) => props.height + 'px'};\n  `;\n  return <Ret width={width} height={height}></Ret>;\n}\ninterface DividerProps {}\n\nconst DividerStyle = styled.div`\n  height: 100%;\n  width: 1px;\n  background-color: ${({ theme }) => theme.borderColor};\n  /* border: 3px solid #2d2d2d; */\n  border: 1px solid ${({ theme }) => theme.borderColor};\n`;\nexport function Divider(props: DividerProps) {\n  return <DividerStyle></DividerStyle>;\n}\n\nexport const Space = styled.div`\n  flex: 1;\n`;\nexport const Label = styled.div`\n  display: flex;\n  flex: 1;\n  overflow: hidden;\n  padding-left: 10px;\n`;\nexport const LabelInner = styled.div`\n  min-width: 0;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n`;\n\nexport const Background = ({ clickEvent }: { clickEvent: () => void }) => {\n  return <FullFixed onClick={() => clickEvent}></FullFixed>;\n};\nexport const scrollBar = `\n&::-webkit-scrollbar {\n  /*滚动条整体样式*/\n  width: 20px; /*高宽分别对应横竖滚动条的尺寸*/\n  height: 1px;\n}\n&::-webkit-scrollbar-thumb {\n  /*滚动条里面小方块*/\n  /* box-shadow: inset 0 0 5px $; */\n  background: #535353;\n}\n&::-webkit-scrollbar-track {\n  /*滚动条里面轨道*/\n  /* box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);\n  border-radius: 10px;\n  background: #ededed; */\n}\n`;\n","import styled from 'styled-components';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { BaseTheme } from '../store/store';\nimport { Icon } from '@mdi/react';\n// interface CustomStyle {\n//   height?: string;\n//   width?: string;\n//   margin?: string;\n// }\ninterface LayoutProps {\n  theme: BaseTheme;\n  height?: string;\n  width?: string;\n  // style?: CustomStyle;\n}\n\nconst Layout = styled.div<LayoutProps>`\n  height: ${({ theme, height }) => (height ? height : theme.navigatorButtonWidth + 'px')};\n  width: ${({ theme, width }) => (width ? width : theme.navigatorButtonWidth + 'px')};\n  background-color: ${({ theme }) => theme.themeColorDark};\n  border: 1px solid black;\n  box-sizing: border-box;\n`;\n\n// const Layout = styled.div(({ theme, height, width }: LayoutProps) => {\n//   return Object.assign({\n//     height: height ? height : theme.navigatorButtonWidth + 'px',\n//     width: width ? width : theme.navigatorButtonWidth + 'px',\n//     backgroundColor: 'red',\n//     border: '1px solid black',\n//     boxSizing: 'border-box',\n//   });\n// });\n\nconst PlaceHolder = styled.div<{ theme: BaseTheme }>`\n  height: ${({ theme }) => theme.navigatorButtonWidth + 'px'};\n  width: ${({ theme }) => theme.navigatorButtonWidth + 'px'};\n`;\ninterface NavigatorButtonContainerProps {\n  placeHolder?: boolean;\n  // styles?: CustomStyle;\n  clickEvent?: () => void;\n  width?: string;\n  height?: string;\n  path: string;\n  size?: string;\n}\nfunction NavigatorButtonContainer({\n  clickEvent,\n  width,\n  height,\n  path,\n  placeHolder = false,\n  size,\n}: NavigatorButtonContainerProps) {\n  if (placeHolder) {\n    return <PlaceHolder></PlaceHolder>;\n  } else {\n    return (\n      <Layout width={size} height={size} onClick={() => clickEvent && clickEvent()}>\n        <Icon path={path} size={size}></Icon>\n      </Layout>\n    );\n  }\n}\n\nconst NavigatorButton = connect(null, null)(NavigatorButtonContainer);\n\nexport default NavigatorButton;\n","export const ADD_NOTE = 'ADD_NOTE';\nexport const GET_NOTES = 'GET_NOTES';\n\nexport const TOGGLE_NOTE = 'TOGGLE_NOTE';\n\nexport const SWITCH_CURRENT_NOTE = 'SWITCH_CURRENT_NOTE';\n\nexport const CHANGE_FILTER = 'CHANGE_FILTER';\n\nexport const EDIT_NOTE = 'EDIT_NOTE';\nexport const DEL_NOTE = 'DEL_NOTE';\n","import { Payload_Note } from '../store';\nimport * as Types from '../constants/note';\n// import * as Types from '@/store/constants/note';\n// import * as Types from '@/store/';\nexport const addNote = (payload: Payload_Note.Add) => ({\n  type: Types.ADD_NOTE,\n  payload,\n});\nexport const getNotes = () => ({\n  type: Types.GET_NOTES,\n});\nexport const editNote = (payload: Payload_Note.Edit) => ({\n  type: Types.EDIT_NOTE,\n  payload: { oldTitle: payload.oldTitle, newTitle: payload.newTitle, newContent: payload.newContent },\n});\nexport const delNote = (payload: Payload_Note.Del) => ({\n  type: Types.DEL_NOTE,\n  payload: { title: payload.title },\n});\n\nexport const toggleNote = (payload: Payload_Note.Fold) => ({\n  type: Types.TOGGLE_NOTE,\n  payload: { title: payload.title },\n});\nexport const switchCurNote = (payload: Payload_Note.Switch) => ({\n  type: Types.SWITCH_CURRENT_NOTE,\n  payload: { title: payload.title },\n});\nexport const changeFilter = (payload: Payload_Note.Filter) => ({\n  type: Types.CHANGE_FILTER,\n  payload: { filter: payload.filter },\n});\n\n// interface A {\n//   title: string;\n// }\n// interface B {\n//   num: number;\n// }\n\n// type C = A & B;\n\n// function test(par:C){\n//   const a = par.num\n// }\n","import { NoteNode } from '../store/store';\nexport function node2Markdown(node: NoteNode, level: number) {\n  let text = '';\n  const pre = '#'.repeat(level);\n  text += `${pre} ${node.title}\\n`;\n  text += `${node.content}\\n`;\n  node.sub.forEach((subNode) => {\n    text += node2Markdown(subNode, level + 1);\n  });\n  return text;\n}\n","import { createSelector } from 'reselect';\n// import { store } from '../reducers/index';\nimport { BeeNoteState, NoteNode } from '../store';\nimport { node2Markdown } from '../../lib/utils';\nconst foldTitles = (state: BeeNoteState) => state.noteData.foldTitles;\nconst curNoteTitle = (state: BeeNoteState) => state.noteData.curNoteTitle;\nconst root = (state: BeeNoteState) => state.noteData.root;\nconst filter = (state: BeeNoteState) => state.noteData.filter;\n/*\nexport const getFoldTitles = createSelector(\n    //监听对象\n    [foldTitles], \n    //对应监听对象\n    (titles) => \n        titles\n    \n    );\n\n*/\nfunction findNoteByTitle(root: NoteNode, title: string) {\n  let ret: NoteNode | null = null;\n  root.sub.forEach((node) => {\n    if (node.title === title) ret = node;\n    if (ret) return ret;\n    ret = findNoteByTitle(node, title);\n  });\n  return ret;\n}\nfunction filteredNodes(node: NoteNode, filter: string) {\n  let ret: NoteNode[] = [];\n  if (node.title.includes(filter) || node.content.includes(filter)) ret.push(node);\n  if (node.sub.length > 0) {\n    node.sub.forEach((subNode) => {\n      ret = [...ret, ...filteredNodes(subNode, filter)];\n    });\n  }\n  return ret;\n}\nexport const getFoldTitles = createSelector([foldTitles], (titles) => titles);\nexport const getEditPaneList = createSelector([curNoteTitle, root, filter], (title, root2, filter2) => {\n  if (filter2 !== '') {\n    return filteredNodes(root2, filter2);\n  }\n  if (title === root2.title) return root2;\n  if (root2.sub.length === 0) return { title: '', content: '', sub: [] };\n  const ret2 = findNoteByTitle(root2, title);\n  if (ret2) return ret2;\n  return { title: '', content: '', sub: [] };\n});\nexport const getMarkdown = createSelector([curNoteTitle, root, filter], (title, root2, filter2) => {\n  if (title === '') return '';\n  let ret2: NoteNode | null = null;\n  if (title === root2.title) ret2 = root2;\n  else ret2 = findNoteByTitle(root2, title);\n  return ret2 ? node2Markdown(ret2, 1) : '';\n});\n","import styled from 'styled-components';\nimport React from 'react';\nimport { Label, LabelInner } from '../styles/Layouts';\nimport NavigatorButton from './NavigatorButton';\nimport { BaseTheme, NoteNode, BeeNoteState } from '../store/store';\nimport { Dispatch } from 'redux';\nimport { toggleNote, switchCurNote, changeFilter, delNote, addNote } from '../store/actions/notes';\nimport { connect } from 'react-redux';\nimport { getFoldTitles } from '../store/selectors/note';\nimport { mdiDelete, mdiPlus, mdiFolder } from '@mdi/js';\ninterface LayoutProps {\n  paddingLeft: string;\n  theme: BaseTheme;\n}\nconst Layout = styled.div<LayoutProps>`\n  height: ${({ theme }) => theme.navigatorItemHeight};\n  padding-left: ${({ paddingLeft }) => paddingLeft};\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin: 1px 0;\n  &:hover {\n    background-color: ${({ theme }) => theme.themeColorLight};\n  }\n`;\nconst SubItem = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\ninterface NavigatorItemProps {\n  data?: NoteNode;\n  level: number;\n  toggle: (title: string) => void;\n  switchNote: (title: string) => void;\n  foldTitles: string[];\n  delNote: (title: string) => void;\n  addNote: (parent: NoteNode) => void;\n}\nfunction del(cb: Function) {\n  // eslint-disable-next-line no-restricted-globals\n  if (confirm('是否删除')) {\n    cb();\n  }\n}\nfunction NavigatorItemContainer({\n  level,\n  data = { title: '', content: '', sub: [] },\n  switchNote,\n  toggle,\n  foldTitles,\n  delNote,\n  addNote,\n}: NavigatorItemProps) {\n  const folded = foldTitles.includes(data.title);\n  const foldable = data.sub.length > 0;\n  return (\n    <React.Fragment>\n      <Layout\n        paddingLeft={level * 10 + 'px'}\n        onClick={() => {\n          switchNote(data.title);\n        }}>\n        <NavigatorButton\n          path={mdiFolder}\n          placeHolder={!foldable}\n          clickEvent={() => toggle(data.title)}></NavigatorButton>\n        <Label>\n          <LabelInner>{data?.title}</LabelInner>\n        </Label>\n        <NavigatorButton path={mdiDelete} clickEvent={() => del(() => delNote(data.title))}></NavigatorButton>\n        <NavigatorButton path={mdiPlus} clickEvent={() => addNote(data)}></NavigatorButton>\n      </Layout>\n      <SubItem>\n        {folded &&\n          data?.sub.map((node) => {\n            return <NavigatorItem level={level + 1} data={node} key={node.title}></NavigatorItem>;\n          })}\n      </SubItem>\n    </React.Fragment>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  delNote: (title: string) => {\n    dispatch(delNote({ title }));\n  },\n  addNote: (parent: NoteNode) => {\n    dispatch(addNote({ parent }));\n  },\n  toggle: (title: string) => dispatch(toggleNote({ title })),\n  switchNote: (title: string) => {\n    dispatch(changeFilter({ filter: '' }));\n    dispatch(switchCurNote({ title }));\n  },\n});\nconst mapStateToProps = (state: BeeNoteState) => ({\n  foldTitles: getFoldTitles(state),\n});\nconst NavigatorItem = connect(mapStateToProps, mapDispatchToProps)(NavigatorItemContainer);\nexport default NavigatorItem;\n","import React from 'react';\nimport styled from 'styled-components';\n// import StorageNavigator from './StorageNavigator';\nimport { BaseTheme, BeeNoteState, NoteNode } from './store/store';\nimport { connect } from 'react-redux';\n// const readline = require('readline');\n\nconst NavTopLayout = styled.div<{ theme: BaseTheme }>`\n  height: 50px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  border-bottom: 2px solid ${({ theme }) => theme.themeColorDark};\n`;\ninterface NavTopContainerProps {\n  root?: NoteNode;\n}\n// const FileLabel = styled.label`\n//   display: flex;\n//   font-size: 20px;\n//   justify-content: space-around;\n//   align-items: center;\n//   width: 100px;\n//   height: 50px;\n// `;\n\nfunction downloadString(content: string, fileName: string, type = 'text/plain') {\n  const anchor = document.createElement('a');\n  anchor.style.display = 'none';\n  document.body.appendChild(anchor);\n  anchor.href = window.URL.createObjectURL(new Blob([content], { type }));\n  anchor.setAttribute('download', fileName);\n  anchor.click();\n  window.URL.revokeObjectURL(anchor.href);\n  document.body.removeChild(anchor);\n}\nfunction getContent(root: NoteNode, level: number) {\n  let content = '';\n  content += `${'#'.repeat(level)} ${root.title}\\n`;\n  if (root.content !== '') content += `${root.content}\\n`;\n  root.sub.forEach((subNode) => {\n    content += getContent(subNode, level + 1);\n  });\n  return content;\n}\n// function read(file: File) {\n//   const reader = new FileReader();\n//   // 用readAsText读取TXT文件内容\n//   reader.readAsText(file);\n//   reader.onload = function (e) {\n//     console.log(e?.target?.result);\n//   };\n// }\n\nconst NavTopContainer = ({ root }: NavTopContainerProps) => {\n  //   let path = '';\n  //   const [filePath, setFilePath] = useState('');\n  //   useCallback(() => {\n  //     console.log(filePath);\n  //   }, [filePath]);\n  return (\n    <NavTopLayout>\n      {/* <FileLabel htmlFor='open'>打开</FileLabel>\n      <input\n        id='open'\n        type='file'\n        style={{ display: 'none' }}\n        onChange={(e) => {\n          console.log(e.target.files && e.target.files[0]);\n          const file = e.target.files && e.target.files[0];\n          if (file) read(file);\n          else alert('未读取到文件');\n        }}></input> */}\n      <input\n        id='save'\n        type='button'\n        value='保存'\n        onClick={() => {\n          const content = root ? getContent(root, 1) : '';\n          downloadString(content, 'test.md', 'text/markdown');\n          console.log(content);\n        }}></input>\n    </NavTopLayout>\n  );\n};\n\nconst mapStateToProps = (state: BeeNoteState) => ({\n  root: state.noteData.root,\n});\nconst NavTop = connect(mapStateToProps, null)(NavTopContainer);\n\nexport default NavTop;\n","import React from 'react';\nimport styled from 'styled-components';\nimport NavigatorItem from './components/NavigatorItem';\n// import StorageNavigator from './StorageNavigator';\nimport { BaseTheme, BeeNoteState, NoteNode } from './store/store';\nimport { connect } from 'react-redux';\nimport { getFoldTitles } from './store/selectors/note';\n// import NavigatorButton from './components/NavigatorButton';\n// import { mdiExport, mdiImport } from '@mdi/js';\nimport NavTop from './NavTop';\nconst NavLayout = styled.div<{ theme: BaseTheme }>`\n  min-width: ${({ theme }) => theme.navWidth};\n  background-color: ${({ theme }) => theme.themeColorDark};\n  color: white;\n  font-size: ${({ theme }) => theme.navFontSize};\n`;\n// const NavTop = styled.div<{ theme: BaseTheme }>`\n//   height: 50px;\n//   display: flex;\n//   justify-content: space-around;\n//   align-items: center;\n//   border-bottom: 2px solid ${({ theme }) => theme.themeColorDark};\n// `;\ninterface NavContainerProps {\n  storage?: NoteNode;\n}\nconst NavContainer = ({ storage }: NavContainerProps) => {\n  const emptyStorage = !storage || storage.title === '';\n  console.log(emptyStorage);\n  return (\n    <NavLayout>\n      {/* 侧边栏上部 */}\n      {/* <NavigatorItem level={0}></NavigatorItem> */}\n      {/* <NavTop>\n        <NavigatorButton path={mdiImport} size='2rem'></NavigatorButton>\n        <NavigatorButton path={mdiExport} size='2rem'></NavigatorButton>\n      </NavTop> */}\n      <NavTop></NavTop>\n      {emptyStorage ? <button>XXXXXXXXXXXXXXXX</button> : <NavigatorItem level={0} data={storage}></NavigatorItem>}\n    </NavLayout>\n  );\n};\nconst mapStateToProps = (state: BeeNoteState) => ({\n  storage: state.noteData.root,\n});\nconst Nav = connect(mapStateToProps, null)(NavContainer);\n\nexport default Nav;\n","import React from 'react';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport { dracula } from 'react-syntax-highlighter/dist/esm/styles/prism';\nimport ReactMarkdown from 'react-markdown';\nimport styled from 'styled-components';\n// import { BeeNoteState, BaseTheme } from './store/store';\n// import { getMarkdown } from './store/selectors/note';\n// import { connect } from 'react-redux';\nimport { scrollBar } from './styles/Layouts';\nimport { BaseTheme } from './store/store';\nconst gfm = require('remark-gfm');\nconst markdownStyle = {\n  code: {\n    backgroundColor: '#3D3D3D',\n  },\n};\n// interface PreviewPaneLayoutProps {}\n\n//自定义渲染器\nconst renderers = {\n  code: (lan: { language: string; value: string }) => {\n    const { language, value } = lan;\n    //判断language是否存在，像是```xxxx```会直接报错\n    if (!language)\n      return (\n        <SyntaxHighlighter style={dracula} language='shell' children={value || ''} customStyle={markdownStyle.code} />\n      );\n    return (\n      <SyntaxHighlighter style={dracula} language={language} children={value || ''} customStyle={markdownStyle.code} />\n    );\n  },\n};\n\nconst Layout = styled.div<{ theme: BaseTheme }>`\n  flex: 1;\n  padding-left: 50px;\n  background-color: ${({ theme }) => theme.themeColorDark};\n  /* background-color: green; */\n  color: white;\n  overflow-y: auto;\n  ${scrollBar}\n`;\n\ninterface PreviewPaneContainerProps {\n  content: string;\n}\nfunction PreviewPaneContainer({ content = '' }: PreviewPaneContainerProps) {\n  return (\n    <Layout>\n      <ReactMarkdown renderers={renderers} plugins={[gfm]} children={content} />\n    </Layout>\n  );\n}\n// const mapStateToProps = (state: BeeNoteState) => ({\n//   content: getMarkdown(state),\n// });\n// const PreviewPane = connect(mapStateToProps, null)(PreviewPaneContainer);\n// export default PreviewPane;\nexport default PreviewPaneContainer;\n","import React from 'react';\nimport CodeMirror from 'react-codemirror';\n// import styled from 'styled-components';\n// import { scrollBar } from '../styles/Layouts';\n// interface LayoutProps {}\n// const Layout = styled.div<LayoutProps>`\n//   overflow-y: auto;\n//   ${scrollBar}\n// `;\ninterface EditorProps {\n  change: (newContent: string) => void;\n  content: string;\n}\nconst option = {\n  lineWrapping: true,\n};\nfunction Editor({ change, content }: EditorProps) {\n  // const inputRef = React.createRef<HTMLTextAreaElement>();\n  return (\n    // <Layout>\n    <CodeMirror options={option} value={content} onChange={change}></CodeMirror>\n    // </Layout>\n  );\n  // return (\n  //   <FullTextArea\n  //     ref={inputRef}\n  //     onChange={(e: any) => {\n  //       change(e.target.value);\n  //     }}\n  //   />\n  // );\n}\nexport default Editor;\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport NavigatorButton from './components/NavigatorButton';\nimport { Inner } from './styles/Layouts';\nimport { NoteNode, BaseTheme } from './store/store';\nimport { connect } from 'react-redux';\nimport { Dispatch } from 'redux';\nimport { useState } from 'react';\nimport Editor from './components/Editor';\nimport { editNote, switchCurNote, delNote } from './store/actions/notes';\n\nimport { mdiAccountEdit, mdiDelete } from '@mdi/js';\ninterface LayoutProps {\n  theme: BaseTheme;\n  isRoot?: boolean;\n}\nconst Layout = styled.div<LayoutProps>`\n  position: relative;\n  width: 100%;\n  padding: 10px 60px 10px 10px;\n  box-sizing: border-box;\n  background-color: ${({ theme }) => theme.borderColor};\n  border: transparent 5px solid;\n  border-color: ${({ isRoot, theme }) => (isRoot ? 'gray' : theme.borderColor)};\n  border-radius: 5px;\n  margin-top: 5px;\n  display: flex;\n  flex-wrap: wrap;\n  color: white;\n  font-size: 10px;\n  z-index: 101;\n`;\nconst Label = styled.div`\n  width: 20%;\n  height: 15px;\n  margin: 5px 0;\n  display: flex;\n  align-items: center;\n`;\nconst Content = styled.div`\n  width: 80%;\n  min-height: 15px;\n  margin: 5px 0;\n  align-items: center;\n`;\nconst SideToolBar = styled.div`\n  position: absolute;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  min-width: ${({ theme }) => theme.navigatorButtonWidth + 20 + 'px'};\n  background-color: ${({ theme }) => theme.themeColorLight};\n  border-radius: 0 5px 5px 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-around;\n`;\nconst TitleInput = styled.input`\n  border: none;\n  height: 30px;\n  font-size: 20px;\n  &:hover {\n    border: none;\n    outline: none;\n  }\n  &:focus {\n    border: none;\n    outline: none;\n  }\n`;\nfunction del(cb: Function) {\n  // eslint-disable-next-line no-restricted-globals\n  if (confirm('是否删除')) {\n    cb();\n  }\n}\ninterface ItemContainerProps {\n  data: NoteNode;\n  editNote: (oldTitle: string, newTitle: string, newContent: string) => void;\n  isRootNode?: boolean;\n  edit: (data: { title: string; content: string }) => void;\n  delNote: (title: string) => void;\n}\nfunction ItemContainer({ data, editNote, isRootNode = false, delNote, edit }: ItemContainerProps) {\n  const [editMode, setEditMode] = useState(false);\n  const [itemContent, setItemContent] = useState(data.content);\n  const [itemTitle, setItemTitle] = useState(data.title);\n  // console.log(itemContent);\n  useEffect(() => {\n    setItemContent(data.content);\n    setItemTitle(data.title);\n    setEditMode(false);\n    edit({ title: '', content: '' });\n  }, [data]);\n  useEffect(() => {\n    if (editMode) edit({ title: itemTitle, content: itemContent });\n  }, [itemContent, itemTitle, editMode, edit]);\n\n  return (\n    <Layout>\n      <Label>标题</Label>\n      <Content>\n        {!editMode ? (\n          data.title\n        ) : (\n          <TitleInput value={itemTitle} onChange={(e) => setItemTitle(e.target.value)}></TitleInput>\n        )}\n      </Content>\n      <Label>内容</Label>\n      <Content>\n        <Inner>{!editMode ? data.content : <Editor change={setItemContent} content={itemContent}></Editor>}</Inner>\n      </Content>\n      <SideToolBar>\n        <NavigatorButton\n          path={mdiAccountEdit}\n          clickEvent={() => {\n            setEditMode(!editMode);\n            if (editMode) {\n              edit({ title: '', content: '' });\n              editNote(data.title, itemTitle, itemContent);\n            } else {\n              edit({ title: data.title, content: data.content });\n            }\n          }}></NavigatorButton>\n        <NavigatorButton path={mdiDelete} clickEvent={() => del(() => delNote(data.title))}></NavigatorButton>\n        {/* <NavigatorButton></NavigatorButton> */}\n      </SideToolBar>\n    </Layout>\n  );\n}\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  delNote: (title: string) => {\n    dispatch(delNote({ title }));\n  },\n  editNote: (oldTitle: string, newTitle: string, newContent: string) => {\n    dispatch(editNote({ oldTitle, newTitle, newContent }));\n    // dispatch(switchCurNote({ title: newTitle }));\n  },\n});\n// const mapStateToProps = (state: BeeNoteState) => ({\n//   list: getEditPaneList(state),\n//   filter: state.noteData.filter,\n// });\n// const NavigatorItem = connect(mapStateToProps, mapDispatchToProps)(EditorPaneContainer);\nconst Item = connect(null, mapDispatchToProps)(ItemContainer);\nexport default Item;\n","import React from 'react';\nimport styled from 'styled-components';\n// import { BaseTheme } from './styles/theme';\nimport Item from './Item';\nimport { connect } from 'react-redux';\nimport { BeeNoteState, NoteNode } from './store/store';\nimport { Dispatch } from 'redux';\nimport _ from 'lodash';\nimport { getEditPaneList } from './store/selectors/note';\nimport { changeFilter, switchCurNote } from './store/actions/notes';\nimport { scrollBar } from './styles/Layouts';\nconst EditorPaneLayout = styled.div<{ width: number }>`\n  display: flex;\n  width: ${({ width }) => {\n    return width === 0 ? '100%' : width + 'px';\n  }};\n  background-color: ${({ theme }) => theme.themeColorDark};\n  flex-direction: column;\n  align-items: center;\n`;\nconst EditorPaneTop = styled.div<{ width: number }>`\n  width: ${({ width }) => {\n    return width === 0 ? '600px' : '100%';\n  }};\n  height: 40px;\n  background-color: ${({ theme }) => theme.themeColorDark};\n  box-sizing: border-box;\n  padding: 5px;\n  display: flex;\n  align-items: center;\n  border-bottom: 1px solid ${({ theme }) => theme.borderColor};\n  display: flex;\n  justify-content: center;\n`;\nconst EditorPaneContent = styled.div<{ width: number }>`\n  width: ${({ width }) => {\n    return width === 0 ? '600px' : '100%';\n  }};\n  padding: 10px;\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  overflow-y: auto;\n  ${scrollBar}\n`;\nconst SearchInput = styled.input`\n  width: 80%;\n  height: 100%;\n  border: none;\n  border-radius: 5px;\n  outline: none;\n  padding-left: 10px;\n  font-size: 10px;\n  background-color: ${({ theme }) => theme.themeColorLight};\n  color: white;\n  &:hover {\n    outline: none;\n  }\n`;\ninterface EditorPaneContainerProps {\n  width: number;\n  list?: NoteNode | NoteNode[];\n  filterChange?: (filter: string) => void;\n  filter: string;\n  edit: (data: { title: string; content: string }) => void;\n}\n\nfunction EditorPaneContainer({ width, list, filterChange, filter, edit }: EditorPaneContainerProps) {\n  // console.log('list:', list);\n  const list2 = _.isArray(list) ? (\n    <React.Fragment>\n      {list.map((node) => {\n        return <Item edit={edit} data={node} key={node.title}></Item>;\n      })}\n    </React.Fragment>\n  ) : (\n    <React.Fragment>\n      {list && list.title !== '' && <Item edit={edit} data={list} isRootNode={true}></Item>}\n      {list &&\n        list.title !== '' &&\n        list.sub.map((node) => {\n          return <Item edit={edit} data={node} key={node.title}></Item>;\n        })}\n    </React.Fragment>\n  );\n  return (\n    <EditorPaneLayout width={width}>\n      <EditorPaneTop width={width}>\n        <SearchInput\n          placeholder='搜索'\n          value={filter}\n          onChange={(e) => {\n            filterChange && filterChange(e.target.value);\n          }}></SearchInput>\n      </EditorPaneTop>\n      <EditorPaneContent width={width}>{list2}</EditorPaneContent>\n    </EditorPaneLayout>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch) => ({\n  // toEditMode: (title: string) => console.log('进入编辑模式'),\n  filterChange: (filter: string) => {\n    dispatch(switchCurNote({ title: '' }));\n    dispatch(changeFilter({ filter }));\n  },\n});\nconst mapStateToProps = (state: BeeNoteState) => ({\n  list: getEditPaneList(state),\n  filter: state.noteData.filter,\n});\n// const NavigatorItem = connect(mapStateToProps, mapDispatchToProps)(EditorPaneContainer);\nconst EditorPane = connect(mapStateToProps, mapDispatchToProps)(EditorPaneContainer);\nexport default EditorPane;\n","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Divider, FullFixed } from './styles/Layouts';\nimport Nav from './Nav';\nimport PreviewPane from './PreviewPane';\nimport EditorPane from './EditorPane';\nimport { useState } from 'react';\nimport { getMarkdown } from './store/selectors/note';\nimport { BeeNoteState } from './store/store';\nimport { connect } from 'react-redux';\nconst MainLayout = styled(FullFixed)`\n  display: flex;\n  flex-direction: row;\n`;\nconst MainContent = styled.div`\n  flex: auto;\n  background-color: black;\n  position: relative;\n  display: flex;\n`;\n\nconst layoutConfig = {\n  eidtorPaneWidth: 600,\n};\nexport interface MainContainerProps {\n  markdown?: string;\n}\n\n/*\n输出\n\n*/\nfunction data2Markdown({ title, content }: { title: string; content: string }) {\n  return ` # ${title}\\n${content}`;\n}\nconst MainContainer = ({ markdown }: MainContainerProps) => {\n  const [curData, setCurData] = useState({ title: '', content: '' });\n\n  useEffect(() => {}, [curData, setCurData]);\n  return (\n    <MainLayout>\n      <Nav />\n      <Divider></Divider>\n      {/* <SideBarContainer></SideBarContainer> */}\n      <MainContent>\n        <EditorPane edit={setCurData} width={layoutConfig.eidtorPaneWidth}></EditorPane>\n        <Divider></Divider>\n        <PreviewPane content={curData.title !== '' ? data2Markdown(curData) : markdown ? markdown : ''}></PreviewPane>\n      </MainContent>\n    </MainLayout>\n  );\n};\n\nconst mapStateToProps = (state: BeeNoteState) => ({\n  markdown: getMarkdown(state),\n});\nconst Main = connect(mapStateToProps, null)(MainContainer);\nexport default Main;\n","import React from 'react';\n// import TwoPanels from './TwoPanels';\nimport { ThemeProvider, createGlobalStyle } from 'styled-components';\nimport Main from './Main';\nimport { BaseTheme, BeeNoteState } from './store/store';\nimport { connect } from 'react-redux';\nimport { scrollBar } from './styles/Layouts';\nrequire('codemirror/lib/codemirror.css');\nconst GlobalStyle = createGlobalStyle`\nBody {\n  font-family:\"Times New Roman,Georgia,Serif;\";\n  .CodeMirror{\n    font-family:\"Times New Roman,Georgia,Serif;\";\n    font-size:20px;\n  }\n  .CodeMirror-vscrollbar{\n    ${scrollBar}\n  }\n}\n`;\ninterface AppProps {\n  theme?: BaseTheme;\n}\nfunction AppContainer({ theme }: AppProps) {\n  return (\n    //将theme注入内部所有styled-components\n    <ThemeProvider theme={theme}>\n      <GlobalStyle></GlobalStyle>\n      <Main></Main>\n      {/* <TwoPanels></TwoPanels> */}\n    </ThemeProvider>\n  );\n}\nconst App = connect(\n  (state: BeeNoteState) => ({\n    theme: state.theme,\n  }),\n  null\n)(AppContainer);\nexport default App;\n","import { NoteAction, NoteData, Payload_Note, NoteNode } from '../store';\nimport * as types from '../constants/note';\nexport const initData: NoteData = {\n  filter: '',\n  curNoteTitle: '',\n  // foldTitles: ['js'],\n  foldTitles: [],\n  root: {\n    title: '测试',\n    content: '',\n    sub: [],\n    // sub: [\n    //   {\n    //     title: 'js',\n    //     content: '',\n    //     sub: [\n    //       {\n    //         title: 'react基础',\n    //         content: 'react基础react基础react基础react基础react基础',\n    //         sub: [],\n    //       },\n    //       {\n    //         title: 'react进阶',\n    //         content: 'react进阶react进阶react进阶react进阶react进阶',\n    //         sub: [],\n    //       },\n    //       {\n    //         title: 'react hook',\n    //         content: 'react hookreact hookreact hookreact hook',\n    //         sub: [],\n    //       },\n    //     ],\n    //   },\n    //   {\n    //     title: 'java',\n    //     content: '',\n    //     sub: [\n    //       {\n    //         title: 'java基础',\n    //         content: 'java基础java基础java基础java基础java基础',\n    //         sub: [],\n    //       },\n    //       {\n    //         title: 'spring',\n    //         content: '',\n    //         sub: [\n    //           {\n    //             title: 'spring基础',\n    //             content: 'spring基础spring基础spring基础spring基础',\n    //             sub: [],\n    //           },\n    //           {\n    //             title: 'spring进阶',\n    //             content: 'spring进阶spring进阶spring进阶spring进阶spring进阶',\n    //             sub: [],\n    //           },\n    //         ],\n    //       },\n    //     ],\n    //   },\n    // ],\n  },\n};\nfunction toggle(state: NoteData, title: string): NoteData {\n  const { filter, curNoteTitle, foldTitles, root } = state;\n  if (foldTitles.includes(title)) {\n    return { filter, curNoteTitle, foldTitles: foldTitles.filter((foldTitle) => foldTitle !== title), root };\n  } else {\n    return { filter, curNoteTitle, foldTitles: [...foldTitles, title], root };\n  }\n}\nfunction switchCurrentNote(state: NoteData, title: string): NoteData {\n  if (state.curNoteTitle === title) return state;\n  const { filter, foldTitles, root } = state;\n  return { filter, curNoteTitle: title, foldTitles, root };\n}\nfunction changeFilter(state: NoteData, filter: string) {\n  if (state.filter === filter) return state;\n  const { curNoteTitle, foldTitles, root } = state;\n  return { filter, curNoteTitle, foldTitles, root };\n}\nfunction findNoteByTitle(root: NoteNode, title: string) {\n  let ret: NoteNode | null = null;\n  if (root.title === title) return root;\n  root.sub.forEach((node) => {\n    if (node.title === title) ret = node;\n    if (ret) return ret;\n    ret = findNoteByTitle(node, title);\n  });\n  return ret;\n}\nfunction editNote(state: NoteData, payload: Payload_Note.Edit) {\n  let copy: NoteData = JSON.parse(JSON.stringify(state));\n  let ret = findNoteByTitle(copy.root, payload.oldTitle);\n  if (!ret) return state;\n  ret.title = payload.newTitle;\n  ret.content = payload.newContent;\n  return copy;\n}\nfunction addNote(state: NoteData, payload: Payload_Note.Add) {\n  let copy: NoteData = JSON.parse(JSON.stringify(state));\n  let ret = findNoteByTitle(copy.root, payload.parent.title);\n  ret?.sub.push({ title: (Math.random() * 100000).toString(), content: '', sub: [] });\n  return copy;\n}\nfunction filterNote(root: NoteNode, title: string) {\n  if (root.title === title) return { title: '', content: '', sub: [] };\n  const { title: rootTitle, content: rootContent } = root;\n  let tempNode: NoteNode = { title: rootTitle, content: rootContent, sub: [] };\n  root.sub.forEach((node) => {\n    if (node.title === title) return;\n    tempNode.sub.push(filterNote(node, title));\n  });\n  return tempNode;\n}\nfunction delNote(state: NoteData, payload: Payload_Note.Del) {\n  let copy: NoteData = JSON.parse(JSON.stringify(state));\n  let ret = filterNote(copy.root, payload.title);\n\n  const { curNoteTitle, filter, foldTitles } = state;\n\n  return { curNoteTitle, filter, foldTitles, root: ret };\n}\nfunction lsSave(data: NoteData) {\n  localStorage.setItem('note', JSON.stringify(data));\n  return data;\n}\nfunction lsRead(): NoteData {\n  const data = localStorage.getItem('note');\n  return data ? JSON.parse(data) : initData;\n  // return initData;\n}\nconst noteData = (state: NoteData = initData, action: NoteAction) => {\n  switch (action.type) {\n    case types.DEL_NOTE:\n      return lsSave(delNote(state, action.payload));\n    case types.ADD_NOTE:\n      return lsSave(addNote(state, action.payload));\n    case types.EDIT_NOTE:\n      return lsSave(editNote(state, action.payload));\n    case types.CHANGE_FILTER:\n      return lsSave(changeFilter(state, action.payload.filter));\n    case types.SWITCH_CURRENT_NOTE:\n      return lsSave(switchCurrentNote(state, action.payload.title));\n    case types.TOGGLE_NOTE:\n      return lsSave(toggle(state, action.payload.title));\n    case types.GET_NOTES:\n    default:\n      // return state;\n      return lsRead();\n  }\n};\nexport default noteData;\n","export const GET_THEME = 'GET_THEME';\n","import { ThemeAction, BaseTheme } from '../store';\nimport { GET_THEME } from '../constants/theme';\n\nconst baseTheme: BaseTheme = {\n  backgroundColor: 'blue',\n  borderColor: 'black',\n  themeColorDark: '#3D3D3D',\n  themeColorLight: '#5d5d5d',\n  //font-size\n  navFontSize: '10px',\n  //size\n  navigatorButtonWidth: 24,\n  navigatorItemHeight: '30px',\n  navWidth: '200px',\n  editorPaneWidth: '500px',\n  sidebarWidth: '150px',\n  StorageNavigatorTopHeight: '30px',\n};\nconst theme = (state = baseTheme, action: ThemeAction) => {\n  switch (action.type) {\n    case GET_THEME:\n    default:\n      return state;\n  }\n};\nexport default theme;\n","import { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\n\nimport { ConfigAction } from '../store';\nimport { combineReducers } from 'redux';\nimport noteData from './note';\nimport theme from './theme';\nconst config = (state = {}, action: ConfigAction) => {\n  switch (action.type) {\n    default:\n      return state;\n  }\n};\nconst reducers = combineReducers({\n  config,\n  theme,\n  noteData,\n});\n\nconst store = createStore(reducers, composeWithDevTools(applyMiddleware(thunk)));\nexport default store;\n// export default todoApp;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Provider } from 'react-redux';\n// import * as serviceWorker from './serviceWorker';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport store from './store/reducers/index';\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}